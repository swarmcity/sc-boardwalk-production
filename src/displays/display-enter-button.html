<!--
@license
Copyright (c) 2017 Swarm City
This code may only be used under the license found at https://github.com/swarmcity/license
-->
<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../data/data-local-storage.html">
<!--

Example:
```
<display-local-storage></display-local-storage>
```

### Styling

Style the button with CSS as you would a normal DOM element.

The following custom properties and mixins are available for styling:

| Custom property | Description | Default |
| --- | --- | --- |
| `--big-btn` | Mixin applied to the enter here button | `{}` |


-->
<dom-module id="display-enter-button">
    <template>
        <style>
            :host {
                display: block;
            }
            .btn{
                @apply --big-btn;
            }
            .btn:active{
                transform: scale(0.97,0.97);
            }
       </style>
       <data-local-storage id="localStorage"></data-local-storage>
       <app-location route="{{route}}"></app-location>
       <button type="button" autofocus class="btn" on-click="_btnClick" on-KeyPress="_btnKeyPress">enter here</button>
   </template>
   <script>
    class DisplayEnterButton extends Polymer.Element {
        static get is() { return 'display-enter-button';}

/**
* If the user has an account change route on button click
*/
_btnClick() {
    this.$.localStorage.accountExists()
    .then((accountExists) => {
        if(!accountExists) {
            this.set('route.path', 'new/');
        } else {
            this.set('route.path', 'login/');
        }
    });
}
/**
* Fired when the user presses a key when selecting the entr button
* @param {object} event The event from the on-KeyPress
*/
_btnKeyPress(event) {
    if (event.keyCode === 32 || event.keyCode === 13) {
        event.preventDefault();
        this._btnClick();
    }
}
} window.customElements.define(DisplayEnterButton.is, DisplayEnterButton);
</script>
</dom-module>
